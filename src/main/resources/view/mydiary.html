<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Me Mission Log</title>
    <link href="../documentation/css/mydiary.css" rel="stylesheet" />
</head>
<body>
<div class="container">
    <div class="header">
        <a class="logo">Me Mission Log</a>
        <div class="menu-bar">
            <a class="button">ÎëòÎü¨Î≥¥Í∏∞</a>
            <a class="button">Ïò§ÎäòÏùò ÏùºÍ∏∞</a>
            <a class="button">ÎßàÏù¥ Îã§Ïù¥Ïñ¥Î¶¨</a>
            <button class="sign-in-btn">Log Out</button>
        </div>
    </div>

    <div class="user-container">
        <div class="user-profile">
            <img src="../documentation/img/profile.jpeg" alt="Profile Picture">
            <p>ÎèåÎ©©Ïù¥Îãò</p>
            <img src="../documentation/img/settings.png" alt="Settings Icon" class="settings-icon" onclick="openModal('userModal')">
        </div>

        <div id="userModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeModal('userModal')">&times;</span>
                <h2>ÌöåÏõê Ï†ïÎ≥¥</h2>
                <div class="modal-body">
                    <div class="modal-left">
                        <p><strong>ÏïÑÏù¥Îîî:</strong> blip0819@gmail.com</p>
                        <p><strong>ÎãâÎÑ§ÏûÑ:</strong> ÎèåÎ©©Ïù¥Îãò</p>
                        <p><strong>Í∞ÄÏûÖÏùº:</strong> 2023-01-01</p>
                    </div>
                    <div class="modal-right">
                        <div class="profile-pic-container">
                            <img src="../documentation/img/profile.jpeg" alt="Profile Picture" class="profile-pic">
                            <button class="change-profile-button" onclick="openModal('profilePicModal')">ÏÇ¨ÏßÑ ÏàòÏ†ï</button>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button onclick="openModal('editModal')">Ï†ïÎ≥¥ ÏàòÏ†ï</button>
                    <button onclick="openModal('deleteModal')">ÌöåÏõê ÌÉàÌá¥</button>
                </div>
            </div>
        </div>

        <div id="editModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeModal('editModal')">&times;</span>
                <h2>Ï†ïÎ≥¥ ÏàòÏ†ï</h2>
                <form id="editForm">
                    <label for="nickname">ÎãâÎÑ§ÏûÑ:</label>
                    <input type="text" id="nickname" name="nickname" value="ÎèåÎ©©Ïù¥Îãò"><br><br>
                    <label for="password">ÎπÑÎ∞ÄÎ≤àÌò∏:</label>
                    <input type="password" id="password" name="password"><br><br>
                    <label for="password2">ÎπÑÎ∞ÄÎ≤àÌò∏ ÌôïÏù∏:</label>
                    <input type="password" id="password2" name="password"><br><br>
                    <div class="form-footer">
                        <button type="submit">ÏàòÏ†ï</button>
                        <button type="button" onclick="closeModal('editModal')">Ï∑®ÏÜå</button>
                    </div>
                </form>
            </div>
        </div>

        <div id="profilePicModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeModal('profilePicModal')">&times;</span>
                <h2>ÌîÑÎ°úÌïÑ ÏÇ¨ÏßÑ Î≥ÄÍ≤Ω</h2>
                <form id="profilePicForm" onsubmit="return updateProfilePic(event)">
                    <input type="file" id="profilePic" name="profilePic"><br><br>
                    <div class="form-footer">
                        <button type="submit">ÏóÖÎ°úÎìú</button>
                        <button type="button" onclick="deleteProfilePic()">ÏÇ≠Ï†ú</button>
                    </div>
                </form>
            </div>
        </div>
        
        <div id="deleteModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeModal('deleteModal')">&times;</span>
                <h2>ÌöåÏõê ÌÉàÌá¥</h2>
                <p>ÌÉàÌá¥ ÌõÑ Í≥ÑÏ†ï Î≥µÍµ¨Í∞Ä Î∂àÍ∞ÄÌï©ÎãàÎã§.<br>Ï†ïÎßê ÌÉàÌá¥Î•º ÏßÑÌñâÌïòÏãúÍ≤†ÏäµÎãàÍπå?<br>ÌÉàÌá¥Î•º ÏõêÌïòÏãúÎ©¥ ÎπÑÎ∞ÄÎ≤àÌò∏Î•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.</p>
                <form id="deleteForm">
                    <label for="deletePassword">ÎπÑÎ∞ÄÎ≤àÌò∏:</label>
                    <input type="password" id="deletePassword" name="deletePassword"><br><br>
                    <div class="form-footer">
                        <button type="submit">ÌÉàÌá¥</button>
                        <button type="button" onclick="closeModal('deleteModal')">Ï∑®ÏÜå</button>
                    </div>
                </form>
            </div>
        </div>

        <div class="user-info">
            <div class="info-header">
                <strong>ÏïÑÏù¥Îîî</strong>
                <p class="email">blip0819@gmail.com</p>
            </div>

        </div>

        <div id="chart-container" class="chart-container">
            <div class="total-mood">
                <p>My Whole Mood</p><br>
                <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
                <canvas id="bar-chart-horizontal" height="150"></canvas>
            </div>

            <div class="user-mood-chart">
                <p>Tracking My Mood</p>
                <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
                <canvas id="line-chart"></canvas>
            </div>
        </div>
    </div>

    <div class="posts">
        <div class="mydiary-menu-bar">
            <button class="tablinks" onclick="openPage(event, 'post-card-container')">Î™®ÏïÑÎ≥¥Í∏∞</button>
            <button class="tablinks" onclick="openPage(event, 'calendar-container')">ÏùºÏûêÎ≥Ñ Î≥¥Í∏∞</button>
        </div>

        <div id="post-card-container" class="tabcontent" style="display: flex;">
            <div class="post-card">
                <img src="../documentation/img/9A63EB15-3A92-4CB7-B950-0BF4A7EEE559.jpeg" alt="Post Image">
            </div>
            <div class="post-card">
                <img src="../documentation/img/B71A7735-D579-4FDF-988B-9FF0AADB9261.jpeg" alt="Post Image">
            </div>
            <div class="post-card">
                <img src="../documentation/img/0FB9A022-E77F-4365-AAFB-8824430ED386.jpeg" alt="Post Image">
            </div>
            <div class="post-card">
                <img src="../documentation/img/5127F18A-E0DE-4D50-91EF-DBFAF5B0C4A1_1_105_c.jpeg" alt="Post Image">
            </div>
            <div class="post-card">
                <img src="../documentation/img/A4F9DE11-C424-4B6F-808A-6A4129B17A90_1_201_a.jpeg" alt="Post Image">
            </div>
            <div class="post-card">
                <img src="../documentation/img/2C706C0C-5837-44BB-99A4-70D79FC0035D.jpeg" alt="Post Image">
            </div>
            <div class="post-card">
                <img src="../documentation/img/C424C20D-4ACE-46F5-A6E5-3DC9664D4858.jpeg" alt="Post Image">
            </div>
            <div class="post-card">
                <img src="../documentation/img/37842708-F42D-425A-AB70-473F617E9B45_1_102_o.jpeg" alt="Post Image">
            </div>
            <div class="post-card">
                <img src="../documentation/img/5C86A530-E7BA-4993-A475-AECBFEDBB514_1_201_a.jpeg" alt="Post Image">
            </div>
            <div class="post-card">
                <img src="../documentation/img/E5CC5654-8AA3-4441-9633-03E543229E02_1_102_o.jpeg" alt="Post Image">
            </div>
            <div class="post-card">
                <img src="../documentation/img/6BB8453D-5992-4530-8318-A3C7360702D7_1_105_c.jpeg" alt="Post Image">
            </div>
            <div class="post-card">
                <img src="../documentation/img/ED439F5C-BC4C-415D-8FF4-5047095DF249.jpeg" alt="Post Image">
            </div>
            <div class="post-card">
                <img src="../documentation/img/0FCF1AB4-9129-4A52-9624-2F6F5928234C.jpeg" alt="Post Image">
            </div>
        </div>

        <div id="calendar-container" class="tabcontent">
            <div class="date-selector">
                <ul>
                    <li>1</li>
                    <li>2</li>
                    <li>3</li>
                    <li>4</li>
                    <li>5</li>
                    <li>6</li>
                    <li>7</li>
                    <li>8</li>
                    <li>9</li>
                    <li>10</li>
                    <li>11</li>
                    <li>12</li>
                    <li>13</li>
                    <li>14</li>
                    <li>15</li>
                    <li>16</li>
                    <li>17</li>
                    <li>18</li>
                    <li>19</li>
                    <li>20</li>
                    <li>21</li>
                    <li>22</li>
                    <li>23</li>
                    <li>24</li>
                    <li>25</li>
                    <li>26</li>
                    <li>27</li>
                    <li>28</li>
                    <li>29</li>
                    <li>30</li>
                    <li>31</li>
                </ul>
            </div>

            <div class="calendar-contents">
                <div class="calendar-card">
                    <img src="../documentation/img/0FCF1AB4-9129-4A52-9624-2F6F5928234C.jpeg" width=150px height=180px>
                </div>
                <div class="calendar-card">
                    <img src="../documentation/img/0FCF1AB4-9129-4A52-9624-2F6F5928234C.jpeg" width=150px height=180px>
                </div>
                <div class="calendar-card">
                    <img src="../documentation/img/0FCF1AB4-9129-4A52-9624-2F6F5928234C.jpeg" width=150px, height=180px>
                </div>
                <div class="calendar-card">
                    <img src="../documentation/img/0FCF1AB4-9129-4A52-9624-2F6F5928234C.jpeg" width=150px, height=180px>
                </div>
                <div class="calendar-card">
                    <img src="../documentation/img/0FCF1AB4-9129-4A52-9624-2F6F5928234C.jpeg" width=150px height=180px>
                </div>
                <div class="calendar-card">
                    <img src="../documentation/img/0FCF1AB4-9129-4A52-9624-2F6F5928234C.jpeg" width=150px height=180px>
                </div>
                <div class="calendar-card">
                    <img src="../documentation/img/0FCF1AB4-9129-4A52-9624-2F6F5928234C.jpeg" width=150px height=180px>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             </div>
                <div class="calendar-card">
                    <img src="../documentation/img/0FCF1AB4-9129-4A52-9624-2F6F5928234C.jpeg" width=150px height=180px>
                </div>
                <div class="calendar-card">
                    <img src="../documentation/img/0FCF1AB4-9129-4A52-9624-2F6F5928234C.jpeg" width=150px height=180px>
                </div>
                <div class="calendar-card">
                    <img src="../documentation/img/0FCF1AB4-9129-4A52-9624-2F6F5928234C.jpeg" width=150px height=180px>
                </div>
                <div class="calendar-card">
                    <img src="../documentation/img/0FCF1AB4-9129-4A52-9624-2F6F5928234C.jpeg" width=150px height=180px>
                </div>
                <div class="calendar-card">
                    <img src="../documentation/img/0FCF1AB4-9129-4A52-9624-2F6F5928234C.jpeg" width=150px height=180px>
                </div>
            </div>
        </div>
    </div>

    <div class="footer">
        <p>CopyRight ¬© Me Mission Log. All Rights Reserved.</p>
    </div>
</div>
<script>
    var barChart;
    var lineChart;
    document.addEventListener("DOMContentLoaded", function () {
        const firstTabLink = document.querySelector(".tablinks");
        if (firstTabLink) {
            firstTabLink.click();
        }
    });
    
    function openPage(evt, pageName) {
        var i, tabcontent, tablinks;
        tabcontent = document.getElementsByClassName("tabcontent");
        for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
        }
        tablinks = document.getElementsByClassName("tablinks");
        for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" active", "");
        }
        document.getElementById(pageName).style.display = "flex";
        evt.currentTarget.className += " active";
    
        if (pageName === 'post-card-container') {
            document.querySelector('.total-mood').style.display = 'block';
            document.querySelector('.user-mood-chart').style.display = 'none';
            displayBarChart();
        } else if (pageName === 'calendar-container') {
            document.querySelector('.total-mood').style.display = 'none';
            document.querySelector('.user-mood-chart').style.display = 'block';
            document.querySelector('.calendar-contents').style.display = 'flex';
            displayLineChart();
        }
    }
    
    function openModal(modalId) {
        var modal = document.getElementById(modalId);
        if (modal) {
            modal.style.display = "block";
        } else {
            console.error(`Modal with ID '${modalId}' not found.`);
        }
    }
    
    function closeModal(modalId) {
        var modal = document.getElementById(modalId);
        if (modal) {
            modal.style.display = "none";
        } else {
            console.error(`Modal with ID '${modalId}' not found.`);
        }
    }
    
    function updateProfilePic(event) {
        event.preventDefault();
        var fileInput = document.getElementById('profilePic');
        var file = fileInput.files[0];
        var reader = new FileReader();
    
        reader.onload = function(e){
            document.querySelector(".profile-pic").src = e.target.result;
            closeModal('profilePicModal');
            alert("ÌöåÏõê Ï†ïÎ≥¥ ÏàòÏ†ïÏù¥ ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§.");
        }
    
        if(file){
            reader.readAsDataURL(file);
        } else {
            alert("ÌååÏùºÏùÑ ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî.")
        }
        return false;
    }
    
    function deleteProfilePic() {
        document.querySelector('.profile-pic').src = '../img/default_profile.png';
        alert("ÌîÑÎ°úÌïÑ ÏÇ¨ÏßÑÏù¥ ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§.");
        closeModal('profilePicModal');
    }
    
    window.onclick = function(event) {
        var modals = document.getElementsByClassName('modal');
        for (var i = 0; i < modals.length; i++) {
            if (event.target == modals[i]) {
                modals[i].style.display = "none";
            }
        }
    }
    
    document.getElementById('editForm').onsubmit = function(event) {
        event.preventDefault();
        alert("Ï†ïÎ≥¥Í∞Ä ÏàòÏ†ïÎêòÏóàÏäµÎãàÎã§.");
        closeModal('editModal');
    }
    
    document.getElementById('deleteForm').onsubmit = function(event) {
        event.preventDefault();
        alert("ÌöåÏõê ÌÉàÌá¥Í∞Ä ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§.");
        closeModal('deleteModal');
        closeModal('userModal');
    }
    
    function displayBarChart() {
    if (barChart) {
        barChart.destroy();
    }
    var barChartCanvas = document.getElementById("bar-chart-horizontal").getContext("2d");
    barChart = new Chart(barChartCanvas, {
        type: 'horizontalBar',
        data: {
            labels: ["üòÄ", "üòä", "üòê", "üòé", "üò¢"],
            datasets: [{
                label: "Emotions (total)",
                backgroundColor: ["#3e95cd", "#8e5ea2","#3cba9f","#e8c3b9","#c45850"],
                data: [25,62,39,43,58]
            }]
        },
        options: {
            legend: { display: false },
            scales: {
                xAxes: [{
                    ticks: {
                        beginAtZero: true
                    },
                    scaleLabel: {
                        display: true,
                        fontSize: 20
                    }
                }],
                yAxes: [{
                    ticks: {
                        fontSize: 20
                    },
                    barPercentage: 0.6,
                    categoryPercentage: 1.2
                }]
            }
        }
    });
}

    
    function displayLineChart() {
        if (lineChart) {
            lineChart.destroy();
        }
        var lineChartCanvas = document.getElementById("line-chart").getContext("2d");
        lineChart = new Chart(lineChartCanvas, {
            type: 'line',
            data: {
                labels: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12],
                datasets: [{
                    data: [20, 18, 22, 25, 24, 26, 19, 21, 23, 17, 16, 20],
                    label: "üòÄ",
                    borderColor: "#3e95cd",
                    fill: false,
                }, {
                    data: [15, 17, 16, 10, 13, 14, 12, 19, 14, 15, 18, 10],
                    label: "üòä",
                    borderColor: "#8e5ea2",
                    fill: false
                }, {
                    data: [30, 20, 18, 25, 20, 18, 24, 20, 20, 18, 21, 20],
                    label: "üòê",
                    borderColor: "#3cba9f",
                    fill: false
                }, {
                    data: [10, 15, 20, 15, 18, 17, 15, 15, 15, 20, 15, 15],
                    label: "üòé",
                    borderColor: "#e8c3b9",
                    fill: false
                }, {
                    data: [25, 30, 24, 25, 25, 25, 30, 25, 28, 30, 30, 35],
                    label: "üò¢",
                    borderColor: "#c45850",
                    fill: false
                }]
            },
            options: {
            legend: {
                labels: {
                    fontSize: 16
                }
            }
        }
    });
    }
    </script>

</body>
</html>